{
 "type":"object",
 "properties":{
   "sample":{
     "type":"object",
     "properties":{
       "callbacks":{
         "type":"array" ,
         "items":{
           "type":"object",
           "properties":{
             "address":{
               "type":"string",
               "description":"For MSG callbacks, the mailbox address to use"
             },
             "delay":{
               "type":"integer",
               "description":"Seed for an initial random delay before first call, in millisecs.  The actual delay is this value plus a random number in [0, 1000)"
             },
             "fire_once":{
               "type":"boolean",
               "description":"A flag specifying whether callbacks should be called at most once, even if the job is requeued and retraces previous states"
             },
             "method":{
               "type":"string" ,
               "enum":[
                 "DELETE", "delete", "put", "msg", "post", "MSG", "POST", "GET", "get", "PUT"
               ],
               "default": "GET",
               "description":"The HTTP method to use"
             },
             "payload":{
               "type":"object",
               "description":"The payload to be used as a message body"
             },
             "retries":{
               "type":"integer",
               "description":"Number of times the callback is retried on failures"
             },
             "retry_delay":{
               "type":"integer",
               "default": 1000,
               "description":"Seed for a exponential back-off between retries, in millisecs"
             },
             "states":{
               "type":"array" ,
               "items":{
                 "type":"string"
               },
               "description":"A list of states for which the callback should be called. If not given, the callback will be called for all state changes"
             },
             "synchronous":{
               "type":"boolean",
               "description":"A flag specifying wether the callback is synchronous and we need to wait for a remote response before proceeding"
             },
             "timeout":{
               "type":"integer",
               "default": 30000,
               "description":"Lapse in millisecs waiting for the callback to get a response"
             },
             "url":{
               "type":"string",
               "description":"The URL to invoke with the method above"
             }
           },
           "required":[
             "url"
           ]
         }
       },
       "count":{
         "type":"integer",
         "minimum":0,
         "description":"The length of the rows array"
       },
       "dataset_id":{
         "type":"string",
         "description":"Dataset to be cached for subsequent sampling"
       },
       "excluded_input_fields":{
         "type":"array" ,
         "items":{
           "anyOf":[
             {
               "type":"integer"
             },
             {
               "type":"string"
             }
           ]
         },
         "description":"List of field identifiers, names or columns to exclude from inputs"
       },
       "fields":{
         "type":"array" ,
         "items":{
           "anyOf":[
             {
               "type":"object",
               "properties":{
                 "auto_generated":{
                   "type":"boolean",
                   "description":"True if the field was generated from another field"
                 },
                 "child_ids":{
                   "type":"array" ,
                   "items":{
                     "type":"string"
                   },
                   "description":"IDs of the children if this generates other fields"
                 },
                 "column_number":{
                   "type":"integer",
                   "minimum":0,
                   "description":"Column from the data source"
                 },
                 "datatype":{
                   "type":"string" ,
                   "enum":[
                     "float", "int16", "millisecond", "int32", "int64", "day-of-month", "second", "hour", "integer", "int8", "year", "double", "minute", "month", "day", "day-of-week"
                   ],
                   "description":"The storage type of the field"
                 },
                 "description":{
                   "type":"string",
                   "description":"Free text description of the field"
                 },
                 "label":{
                   "type":"string",
                   "description":"A label for the field (free text for use by clients)"
                 },
                 "locale":{
                   "type":"string",
                   "description":"Overrides global locale"
                 },
                 "missing_tokens":{
                   "type":"array" ,
                   "items":{
                     "type":"string"
                   },
                   "description":"Overrides global missing tokens"
                 },
                 "name":{
                   "type":"string",
                   "description":"Name for the field"
                 },
                 "optype":{
                   "type":"string" ,
                   "enum":[
                     "numeric"
                   ],
                   "description":"Operational type of this field"
                 },
                 "parent_ids":{
                   "type":"array" ,
                   "items":{
                     "type":"string"
                   },
                   "description":"IDs of the parents if this is a generated field"
                 },
                 "preferred":{
                   "anyOf":[
                     {
                       "type":"null"
                     },
                     {
                       "type":"boolean"
                     }
                   ],
                   "default": true,
                   "description":"Whether the field is used by default for model creation"
                 },
                 "summary":{
                   "type":"object",
                   "properties":{
                     "bins":{
                       "type":"array" ,
                       "items":{
                         "type":"array" ,
                         "items":[
                           {
                             "type":"number"
                           },
                           {
                             "type":"integer"
                           }
                         ]
                       },
                       "description":"Captures the distribution for the field.  Each tuple represents a bin from an approximate histogram.  Each bin contains the bin mean and a membership count.  Used when there are more than 32 unique numeric values"
                     },
                     "counts":{
                       "type":"array" ,
                       "items":{
                         "type":"array" ,
                         "items":[
                           {
                             "type":"number"
                           },
                           {
                             "type":"integer"
                           }
                         ]
                       },
                       "description":"Captures the distribution for the field.  Contains tuples of the unique values and their occurrence counts. Used when there are 32 or less unique numeric values"
                     },
                     "kurtosis":{
                       "anyOf":[
                         {
                           "type":"null"
                         },
                         {
                           "type":"number"
                         }
                       ],
                       "description":"The sample kurtosis for numeric fields"
                     },
                     "maximum":{
                       "anyOf":[
                         {
                           "type":"null"
                         },
                         {
                           "type":"number"
                         }
                       ],
                       "description":"Maximum value for numeric fields"
                     },
                     "mean":{
                       "anyOf":[
                         {
                           "type":"null"
                         },
                         {
                           "type":"number"
                         }
                       ],
                       "description":"The sample mean for numeric fields"
                     },
                     "median":{
                       "anyOf":[
                         {
                           "type":"null"
                         },
                         {
                           "type":"number"
                         }
                       ],
                       "description":"The approximate median for numeric fields"
                     },
                     "minimum":{
                       "anyOf":[
                         {
                           "type":"null"
                         },
                         {
                           "type":"number"
                         }
                       ],
                       "description":"Minimum value for numeric fields"
                     },
                     "missing_count":{
                       "type":"integer",
                       "description":"# of instances missing this field"
                     },
                     "population":{
                       "type":"integer",
                       "description":"# of instances containing data for this field"
                     },
                     "skewness":{
                       "anyOf":[
                         {
                           "type":"null"
                         },
                         {
                           "type":"number"
                         }
                       ],
                       "description":"The sample skewness for numeric fields"
                     },
                     "splits":{
                       "type":"array" ,
                       "items":{
                         "type":"number"
                       },
                       "description":"DEPRECATED - Histogram split points for field"
                     },
                     "standard_deviation":{
                       "anyOf":[
                         {
                           "type":"null"
                         },
                         {
                           "type":"number"
                         }
                       ],
                       "description":"The sample standard deviation for numeric fields"
                     },
                     "sum":{
                       "type":"number",
                       "description":"Sum of values (for mean calculation)"
                     },
                     "sum_squares":{
                       "type":"number",
                       "description":"Sum of squared values (for variance calculation)"
                     },
                     "variance":{
                       "anyOf":[
                         {
                           "type":"null"
                         },
                         {
                           "type":"number"
                         }
                       ],
                       "description":"The sample variance for numeric fields"
                     }
                   }
                 },
                 "term_analysis":{
                   "type":"object",
                   "properties":{
                     "case_sensitive":{
                       "type":"boolean",
                       "description":"Defines whether the term analysis is case sensitive"
                     },
                     "enabled":{
                       "type":"boolean",
                       "description":"Enable/disables term analysis for this field"
                     },
                     "language":{
                       "type":"string",
                       "default": "none",
                       "description":"Language code for detected language (or 'none')"
                     },
                     "stem_words":{
                       "type":"boolean",
                       "description":"Defines whether the term analysis stems words"
                     },
                     "token_mode":{
                       "type":"string" ,
                       "enum":[
                         "full_terms_only", "tokens_only", "all"
                       ],
                       "default": "all",
                       "description":"Defines whether the term analysis uses full terms, tokenized terms, or both"
                     },
                     "use_stopwords":{
                       "type":"boolean",
                       "description":"Defines whether the term analysis uses stop words"
                     }
                   }
                 }
               }
             },
             {
               "type":"object",
               "properties":{
                 "auto_generated":{
                   "type":"boolean",
                   "description":"True if the field was generated from another field"
                 },
                 "child_ids":{
                   "type":"array" ,
                   "items":{
                     "type":"string"
                   },
                   "description":"IDs of the children if this generates other fields"
                 },
                 "column_number":{
                   "type":"integer",
                   "minimum":0,
                   "description":"Column from the data source"
                 },
                 "datatype":{
                   "type":"string" ,
                   "enum":[
                     "boolean", "string"
                   ],
                   "description":"The storage type of the field"
                 },
                 "description":{
                   "type":"string",
                   "description":"Free text description of the field"
                 },
                 "label":{
                   "type":"string",
                   "description":"A label for the field (free text for use by clients)"
                 },
                 "locale":{
                   "type":"string",
                   "description":"Overrides global locale"
                 },
                 "missing_tokens":{
                   "type":"array" ,
                   "items":{
                     "type":"string"
                   },
                   "description":"Overrides global missing tokens"
                 },
                 "name":{
                   "type":"string",
                   "description":"Name for the field"
                 },
                 "optype":{
                   "type":"string" ,
                   "enum":[
                     "text"
                   ],
                   "description":"Operational type of this field"
                 },
                 "parent_ids":{
                   "type":"array" ,
                   "items":{
                     "type":"string"
                   },
                   "description":"IDs of the parents if this is a generated field"
                 },
                 "preferred":{
                   "anyOf":[
                     {
                       "type":"null"
                     },
                     {
                       "type":"boolean"
                     }
                   ],
                   "default": true,
                   "description":"Whether the field is used by default for model creation"
                 },
                 "summary":{
                   "type":"object",
                   "properties":{
                     "average_length":{
                       "type":"number",
                       "description":"The average # of chars for non-missing values"
                     },
                     "missing_count":{
                       "type":"integer",
                       "description":"# of instances missing in this field"
                     },
                     "tag_cloud":{
                       "type":"array" ,
                       "items":{
                         "type":"array" ,
                         "items":[
                           {
                             "type":"string"
                           },
                           {
                             "type":"number"
                           }
                         ]
                       },
                       "description":"Top terms with number of occurences"
                     },
                     "term_forms":{
                       "type":"object",
                       "description":"Dictionary of multi-form terms to all forms seen"
                     }
                   }
                 },
                 "term_analysis":{
                   "type":"object",
                   "properties":{
                     "case_sensitive":{
                       "type":"boolean",
                       "description":"Defines whether the term analysis is case sensitive"
                     },
                     "enabled":{
                       "type":"boolean",
                       "description":"Enable/disables term analysis for this field"
                     },
                     "language":{
                       "type":"string",
                       "default": "none",
                       "description":"Language code for detected language (or 'none')"
                     },
                     "stem_words":{
                       "type":"boolean",
                       "description":"Defines whether the term analysis stems words"
                     },
                     "token_mode":{
                       "type":"string" ,
                       "enum":[
                         "full_terms_only", "tokens_only", "all"
                       ],
                       "default": "all",
                       "description":"Defines whether the term analysis uses full terms, tokenized terms, or both"
                     },
                     "use_stopwords":{
                       "type":"boolean",
                       "description":"Defines whether the term analysis uses stop words"
                     }
                   }
                 }
               }
             },
             {
               "type":"object",
               "properties":{
                 "auto_generated":{
                   "type":"boolean",
                   "description":"True if the field was generated from another field"
                 },
                 "child_ids":{
                   "type":"array" ,
                   "items":{
                     "type":"string"
                   },
                   "description":"IDs of the children if this generates other fields"
                 },
                 "column_number":{
                   "type":"integer",
                   "minimum":0,
                   "description":"Column from the data source"
                 },
                 "datatype":{
                   "type":"string" ,
                   "enum":[
                     "string"
                   ],
                   "description":"The storage type of the field"
                 },
                 "description":{
                   "type":"string",
                   "description":"Free text description of the field"
                 },
                 "label":{
                   "type":"string",
                   "description":"A label for the field (free text for use by clients)"
                 },
                 "locale":{
                   "type":"string",
                   "description":"Overrides global locale"
                 },
                 "missing_tokens":{
                   "type":"array" ,
                   "items":{
                     "type":"string"
                   },
                   "description":"Overrides global missing tokens"
                 },
                 "name":{
                   "type":"string",
                   "description":"Name for the field"
                 },
                 "optype":{
                   "type":"string" ,
                   "enum":[
                     "datetime"
                   ],
                   "description":"Operational type of this field"
                 },
                 "parent_ids":{
                   "type":"array" ,
                   "items":{
                     "type":"string"
                   },
                   "description":"IDs of the parents if this is a generated field"
                 },
                 "preferred":{
                   "anyOf":[
                     {
                       "type":"null"
                     },
                     {
                       "type":"boolean"
                     }
                   ],
                   "default": true,
                   "description":"Whether the field is used by default for model creation"
                 },
                 "summary":{
                   "type":"object",
                   "properties":{
                     "missing_count":{
                       "type":"integer",
                       "description":"# of instances missing this field"
                     }
                   },
                   "additionalProperties": false
                 },
                 "term_analysis":{
                   "type":"object",
                   "properties":{
                     "case_sensitive":{
                       "type":"boolean",
                       "description":"Defines whether the term analysis is case sensitive"
                     },
                     "enabled":{
                       "type":"boolean",
                       "description":"Enable/disables term analysis for this field"
                     },
                     "language":{
                       "type":"string",
                       "default": "none",
                       "description":"Language code for detected language (or 'none')"
                     },
                     "stem_words":{
                       "type":"boolean",
                       "description":"Defines whether the term analysis stems words"
                     },
                     "token_mode":{
                       "type":"string" ,
                       "enum":[
                         "full_terms_only", "tokens_only", "all"
                       ],
                       "default": "all",
                       "description":"Defines whether the term analysis uses full terms, tokenized terms, or both"
                     },
                     "use_stopwords":{
                       "type":"boolean",
                       "description":"Defines whether the term analysis uses stop words"
                     }
                   }
                 },
                 "time_formats":{
                   "type":"array" ,
                   "items":{
                     "type":"string"
                   },
                   "description":"Formats of times in this field from clj-time"
                 }
               }
             },
             {
               "type":"object",
               "properties":{
                 "auto_generated":{
                   "type":"boolean",
                   "description":"True if the field was generated from another field"
                 },
                 "child_ids":{
                   "type":"array" ,
                   "items":{
                     "type":"string"
                   },
                   "description":"IDs of the children if this generates other fields"
                 },
                 "column_number":{
                   "type":"integer",
                   "minimum":0,
                   "description":"Column from the data source"
                 },
                 "datatype":{
                   "type":"string" ,
                   "enum":[
                     "string"
                   ],
                   "description":"The storage type of the field"
                 },
                 "description":{
                   "type":"string",
                   "description":"Free text description of the field"
                 },
                 "label":{
                   "type":"string",
                   "description":"A label for the field (free text for use by clients)"
                 },
                 "locale":{
                   "type":"string",
                   "description":"Overrides global locale"
                 },
                 "missing_tokens":{
                   "type":"array" ,
                   "items":{
                     "type":"string"
                   },
                   "description":"Overrides global missing tokens"
                 },
                 "name":{
                   "type":"string",
                   "description":"Name for the field"
                 },
                 "optype":{
                   "type":"string" ,
                   "enum":[
                     "categorical"
                   ],
                   "description":"Operational type of this field"
                 },
                 "parent_ids":{
                   "type":"array" ,
                   "items":{
                     "type":"string"
                   },
                   "description":"IDs of the parents if this is a generated field"
                 },
                 "preferred":{
                   "anyOf":[
                     {
                       "type":"null"
                     },
                     {
                       "type":"boolean"
                     }
                   ],
                   "default": true,
                   "description":"Whether the field is used by default for model creation"
                 },
                 "summary":{
                   "type":"object",
                   "properties":{
                     "categories":{
                       "anyOf":[
                         {
                           "type":"array" ,
                           "items":{
                             "type":"array" ,
                             "items":[
                               {
                                 "type":"string"
                               },
                               {
                                 "type":"number"
                               }
                             ]
                           }
                         },
                         {
                           "type":"array" ,
                           "items":{
                             "type":"array" ,
                             "items":[
                               {
                                 "type":"integer"
                               },
                               {
                                 "type":"null"
                               }
                             ]
                           }
                         }
                       ],
                       "description":"The possible categories for categorical fields"
                     },
                     "missing_count":{
                       "anyOf":[
                         {
                           "type":"null"
                         },
                         {
                           "type":"integer"
                         }
                       ],
                       "description":"# of instances missing this field # of instances missing this field"
                     }
                   },
                   "description":"# of instances missing this field"
                 },
                 "term_analysis":{
                   "type":"object",
                   "properties":{
                     "case_sensitive":{
                       "type":"boolean",
                       "description":"Defines whether the term analysis is case sensitive"
                     },
                     "enabled":{
                       "type":"boolean",
                       "description":"Enable/disables term analysis for this field"
                     },
                     "language":{
                       "type":"string",
                       "default": "none",
                       "description":"Language code for detected language (or 'none')"
                     },
                     "stem_words":{
                       "type":"boolean",
                       "description":"Defines whether the term analysis stems words"
                     },
                     "token_mode":{
                       "type":"string" ,
                       "enum":[
                         "full_terms_only", "tokens_only", "all"
                       ],
                       "default": "all",
                       "description":"Defines whether the term analysis uses full terms, tokenized terms, or both"
                     },
                     "use_stopwords":{
                       "type":"boolean",
                       "description":"Defines whether the term analysis uses stop words"
                     }
                   }
                 }
               }
             }
           ]
         },
         "description":"A list of fields in the dataset, in the rows order"
       },
       "input_fields":{
         "type":"array" ,
         "items":{
           "anyOf":[
             {
               "type":"integer"
             },
             {
               "type":"string"
             }
           ]
         },
         "description":"List of fields ids, in order, in the dataset"
       },
       "intercept":{
         "type":"number",
         "description":"Intercept for linear regression betwen 2 fields"
       },
       "intercepts":{
         "type":"object",
         "description":"A map from field id to linear regression intercept"
       },
       "max_rows":{
         "type":"integer",
         "minimum":0,
         "description":"Maximum number of rows in this sample"
       },
       "pearson_correlation":{
         "type":"number",
         "description":"Pearson's correlation between 2 field"
       },
       "pearson_correlations":{
         "type":"object",
         "description":"A map from field id to Pearson correlation"
       },
       "rows":{
         "type":"array" ,
         "items":{
           "type":"array" ,
           "items":{
             "anyOf":[
               {
                 "type":"null"
               },
               {
                 "anyOf":[
                   {
                     "type":"number"
                   },
                   {
                     "type":"string"
                   }
                 ]
               }
             ]
           }
         },
         "description":"A filtered subsample of the dataset"
       },
       "seed":{
         "type":"string",
         "description":"Seed used for sampling, when needed"
       },
       "slope":{
         "type":"number",
         "description":"Slope for linear regression between 2 fields"
       },
       "slopes":{
         "type":"object",
         "description":"A map from field id to linear regression slope"
       },
       "spearman_correlation":{
         "type":"number",
         "description":"Spearman's correlation between 2 fields"
       },
       "spearman_correlations":{
         "type":"object",
         "description":"A map from field id to Spearman correlation"
       }
     },
     "required":[
       "dataset_id"
     ]
   }
 },
 "required":[
   "sample"
 ],
 "additionalProperties": false
}
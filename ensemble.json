{
 "type":"object",
 "properties":{
   "model":{
     "type":"object",
     "properties":{
       "callbacks":{
         "type":"array" ,
         "items":{
           "type":"object",
           "properties":{
             "address":{
               "type":"string",
               "description":"For MSG callbacks, the mailbox address to use"
             },
             "delay":{
               "type":"integer",
               "description":"Seed for an initial random delay before first call, in millisecs.  The actual delay is this value plus a random number in [0, 1000)"
             },
             "fire_once":{
               "type":"boolean",
               "description":"A flag specifying whether callbacks should be called at most once, even if the job is requeued and retraces previous states"
             },
             "method":{
               "type":"string" ,
               "enum":[
                 "DELETE", "delete", "put", "msg", "post", "MSG", "POST", "GET", "get", "PUT"
               ],
               "default": "GET",
               "description":"The HTTP method to use"
             },
             "payload":{
               "type":"object",
               "description":"The payload to be used as a message body"
             },
             "retries":{
               "type":"integer",
               "description":"Number of times the callback is retried on failures"
             },
             "retry_delay":{
               "type":"integer",
               "default": 1000,
               "description":"Seed for a exponential back-off between retries, in millisecs"
             },
             "states":{
               "type":"array" ,
               "items":{
                 "type":"string"
               },
               "description":"A list of states for which the callback should be called. If not given, the callback will be called for all state changes"
             },
             "synchronous":{
               "type":"boolean",
               "description":"A flag specifying wether the callback is synchronous and we need to wait for a remote response before proceeding"
             },
             "timeout":{
               "type":"integer",
               "default": 30000,
               "description":"Lapse in millisecs waiting for the callback to get a response"
             },
             "url":{
               "type":"string",
               "description":"The URL to invoke with the method above"
             }
           },
           "required":[
             "url"
           ]
         }
       },
       "dataset_id":{
         "type":"string",
         "description":"Identifier of this model's main dataset"
       },
       "dataset_ids":{
         "type":"array" ,
         "items":{
           "type":"string"
         },
         "description":"Identifiers of this model's additional datasets"
       },
       "default_numeric_value":{
         "type":"string" ,
         "enum":[
           "mean", "maximum", "minimum", "zero", "median"
         ],
         "description":"Catch-all missing filler for numeric fields."
       },
       "default_values":{
         "type":"object",
         "description":"A map for field identifiers to values for missing entries."
       },
       "depth_threshold":{
         "type":"integer",
         "minimum":1,
         "description":"The depth limit for a tree"
       },
       "distribution":{
         "type":"object",
         "properties":{
           "predictions":{
             "type":"object",
             "properties":{
               "bins":{
                 "type":"array" ,
                 "items":{
                   "type":"array" ,
                   "items":[
                     {
                       "type":"number"
                     },
                     {
                       "type":"number"
                     }
                   ]
                 },
                 "description":"Captures the distribution for the objective field.  Each tuple represents a bin from an approximate histogram.  Each bin contains the bin mean and a membership count.  Used when there are more than 32 unique numeric values. During model construction, the counts can be fractional for partial models.  When the model is finished, however, all counts will be integers."
               },
               "categories":{
                 "type":"array" ,
                 "items":{
                   "type":"array" ,
                   "items":[
                     {
                       "type":"string"
                     },
                     {
                       "type":"number"
                     }
                   ]
                 },
                 "description":"Captures the distribution for the objective field.  Each tuple contains a category and the category occurrence count.  Used when the objective is categorical. For partial models, counts are an estimation and, as such, they won't be in general integers.  But finished models the pairs will always consist of a string and an integer."
               },
               "counts":{
                 "type":"array" ,
                 "items":{
                   "type":"array" ,
                   "items":[
                     {
                       "type":"number"
                     },
                     {
                       "type":"number"
                     }
                   ]
                 },
                 "description":"Captures the distribution for the objective field.  Contains tuples of the unique values and their occurrence counts.  Used when there are 32 or less unique numeric values. During model construction, these counts can be fractional for partial models.  When the model is finished, however, all counts will be integers."
               },
               "exact":{
                 "type":"boolean",
                 "description":"When the numeric distribution is in eqi-width format this captures whether the histogram is approximate or represents the distribution exactly"
               },
               "maximum":{
                 "type":"number",
                 "description":"Maximum value for numeric fields, used when 'bins' are present"
               },
               "populations":{
                 "type":"array" ,
                 "items":{
                   "type":"number"
                 },
                 "description":"When the numeric distribution is in eqi-width format this captures the population of each eqi-width bin"
               },
               "start":{
                 "type":"number",
                 "description":"When the numeric distribution is in eqi-width this captures the lower edge of the first bin"
               },
               "width":{
                 "type":"number",
                 "description":"When the numeric distribution is in eqi-width format this captures the width of each eqi-width bin"
               }
             }
           },
           "training":{
             "type":"object",
             "properties":{
               "bins":{
                 "type":"array" ,
                 "items":{
                   "type":"array" ,
                   "items":[
                     {
                       "type":"number"
                     },
                     {
                       "type":"number"
                     }
                   ]
                 },
                 "description":"Captures the distribution for the objective field.  Each tuple represents a bin from an approximate histogram.  Each bin contains the bin mean and a membership count.  Used when there are more than 32 unique numeric values. During model construction, the counts can be fractional for partial models.  When the model is finished, however, all counts will be integers."
               },
               "categories":{
                 "type":"array" ,
                 "items":{
                   "type":"array" ,
                   "items":[
                     {
                       "type":"string"
                     },
                     {
                       "type":"number"
                     }
                   ]
                 },
                 "description":"Captures the distribution for the objective field.  Each tuple contains a category and the category occurrence count.  Used when the objective is categorical. For partial models, counts are an estimation and, as such, they won't be in general integers.  But finished models the pairs will always consist of a string and an integer."
               },
               "counts":{
                 "type":"array" ,
                 "items":{
                   "type":"array" ,
                   "items":[
                     {
                       "type":"number"
                     },
                     {
                       "type":"number"
                     }
                   ]
                 },
                 "description":"Captures the distribution for the objective field.  Contains tuples of the unique values and their occurrence counts.  Used when there are 32 or less unique numeric values. During model construction, these counts can be fractional for partial models.  When the model is finished, however, all counts will be integers."
               },
               "exact":{
                 "type":"boolean",
                 "description":"When the numeric distribution is in eqi-width format this captures whether the histogram is approximate or represents the distribution exactly"
               },
               "maximum":{
                 "type":"number",
                 "description":"Maximum value for numeric fields, used when 'bins' are present"
               },
               "populations":{
                 "type":"array" ,
                 "items":{
                   "type":"number"
                 },
                 "description":"When the numeric distribution is in eqi-width format this captures the population of each eqi-width bin"
               },
               "start":{
                 "type":"number",
                 "description":"When the numeric distribution is in eqi-width this captures the lower edge of the first bin"
               },
               "width":{
                 "type":"number",
                 "description":"When the numeric distribution is in eqi-width format this captures the width of each eqi-width bin"
               }
             },
             "description":"The training data distribution across predicted values, initially and after flowing through the tree"
           }
         },
         "additionalProperties": false,
         "description":"The training data distribution across predicted values, initially and after flowing through the tree"
       },
       "excluded_input_fields":{
         "type":"array" ,
         "items":{
           "anyOf":[
             {
               "type":"integer"
             },
             {
               "type":"string"
             }
           ]
         },
         "description":"List of field identifiers, names or columns to exclude from input"
       },
       "fields":{
         "type":"object",
         "additionalProperties": false,
         "description":"Possibly partial list of descriptors for fields used in the model"
       },
       "fields_maps":{
         "type":"array" ,
         "items":{
           "type":"array" ,
           "items":[
             {
               "type":"string"
             },
             {
               "type":"object"
             }
           ]
         },
         "description":"List of two-element arrays, where the first is a dataset ID and the second is a field map; to be used with dataset_ids"
       },
       "importance":{
         "type":"array" ,
         "items":{
           "type":"array" ,
           "items":[
             {
               "type":"string"
             },
             {
               "type":"number"
             }
           ]
         },
         "description":"Contains pairs of field ids and importance scores (one for each input field). The higher the score, the more the field helps reduce error on the training set"
       },
       "input_fields":{
         "type":"array" ,
         "items":{
           "anyOf":[
             {
               "type":"integer"
             },
             {
               "type":"string"
             }
           ]
         },
         "description":"List of input field identifiers, names or columns"
       },
       "kind":{
         "type":"string" ,
         "enum":[
           "ensemble"
         ],
         "description":"The kind of this message's body"
       },
       "locale":{
         "type":"string",
         "description":"Default locale for field value"
       },
       "missing_splits":{
         "type":"boolean",
         "description":"Whether to include missing features values when picking splits in the trees"
       },
       "missing_strategy":{
         "type":"string" ,
         "enum":[
           "last_prediction", "proportional"
         ]
       },
       "missing_tokens":{
         "type":"array" ,
         "items":{
           "type":"string"
         },
         "default": [],
         "description":"Default tokens that represent a missing value"
       },
       "model_fields":{
         "type":"object",
         "additionalProperties": false,
         "description":"Map of descriptors for fields actually appearing in the model, without summaries"
       },
       "models":{
         "type":"array" ,
         "items":{
           "type":"string"
         },
         "description":"A list of the identifiers of the trees built so far in the ensemble"
       },
       "node_threshold":{
         "type":"integer",
         "default": 512,
         "description":"PRIVATE - The soft limit for number of nodes in the tree"
       },
       "objective_field":{
         "type":"string",
         "description":"Objective field (target) identifier.  Gets added to objective_fields. Useful for models with a single objective field."
       },
       "objective_field_descriptor":{
         "anyOf":[
           {
             "type":"object",
             "properties":{
               "auto_generated":{
                 "type":"boolean",
                 "description":"True if the field was generated from another field"
               },
               "child_ids":{
                 "type":"array" ,
                 "items":{
                   "type":"string"
                 },
                 "description":"IDs of the children if this generates other fields"
               },
               "column_number":{
                 "type":"integer",
                 "minimum":0,
                 "description":"Column from the data source"
               },
               "datatype":{
                 "type":"string" ,
                 "enum":[
                   "float", "int16", "millisecond", "int32", "int64", "day-of-month", "second", "hour", "integer", "int8", "year", "double", "minute", "month", "day", "day-of-week"
                 ],
                 "description":"The storage type of the field"
               },
               "description":{
                 "type":"string",
                 "description":"Free text description of the field"
               },
               "label":{
                 "type":"string",
                 "description":"A label for the field (free text for use by clients)"
               },
               "locale":{
                 "type":"string",
                 "description":"Overrides global locale"
               },
               "missing_tokens":{
                 "type":"array" ,
                 "items":{
                   "type":"string"
                 },
                 "description":"Overrides global missing tokens"
               },
               "name":{
                 "type":"string",
                 "description":"Name for the field"
               },
               "optype":{
                 "type":"string" ,
                 "enum":[
                   "numeric"
                 ],
                 "description":"Operational type of this field"
               },
               "parent_ids":{
                 "type":"array" ,
                 "items":{
                   "type":"string"
                 },
                 "description":"IDs of the parents if this is a generated field"
               },
               "preferred":{
                 "anyOf":[
                   {
                     "type":"null"
                   },
                   {
                     "type":"boolean"
                   }
                 ],
                 "default": true,
                 "description":"Whether the field is used by default for model creation"
               },
               "summary":{
                 "type":"object",
                 "properties":{
                   "bins":{
                     "type":"array" ,
                     "items":{
                       "type":"array" ,
                       "items":[
                         {
                           "type":"number"
                         },
                         {
                           "type":"integer"
                         }
                       ]
                     },
                     "description":"Captures the distribution for the field.  Each tuple represents a bin from an approximate histogram.  Each bin contains the bin mean and a membership count.  Used when there are more than 32 unique numeric values"
                   },
                   "counts":{
                     "type":"array" ,
                     "items":{
                       "type":"array" ,
                       "items":[
                         {
                           "type":"number"
                         },
                         {
                           "type":"integer"
                         }
                       ]
                     },
                     "description":"Captures the distribution for the field.  Contains tuples of the unique values and their occurrence counts. Used when there are 32 or less unique numeric values"
                   },
                   "kurtosis":{
                     "anyOf":[
                       {
                         "type":"null"
                       },
                       {
                         "type":"number"
                       }
                     ],
                     "description":"The sample kurtosis for numeric fields"
                   },
                   "maximum":{
                     "anyOf":[
                       {
                         "type":"null"
                       },
                       {
                         "type":"number"
                       }
                     ],
                     "description":"Maximum value for numeric fields"
                   },
                   "mean":{
                     "anyOf":[
                       {
                         "type":"null"
                       },
                       {
                         "type":"number"
                       }
                     ],
                     "description":"The sample mean for numeric fields"
                   },
                   "median":{
                     "anyOf":[
                       {
                         "type":"null"
                       },
                       {
                         "type":"number"
                       }
                     ],
                     "description":"The approximate median for numeric fields"
                   },
                   "minimum":{
                     "anyOf":[
                       {
                         "type":"null"
                       },
                       {
                         "type":"number"
                       }
                     ],
                     "description":"Minimum value for numeric fields"
                   },
                   "missing_count":{
                     "type":"integer",
                     "description":"# of instances missing this field"
                   },
                   "population":{
                     "type":"integer",
                     "description":"# of instances containing data for this field"
                   },
                   "skewness":{
                     "anyOf":[
                       {
                         "type":"null"
                       },
                       {
                         "type":"number"
                       }
                     ],
                     "description":"The sample skewness for numeric fields"
                   },
                   "splits":{
                     "type":"array" ,
                     "items":{
                       "type":"number"
                     },
                     "description":"DEPRECATED - Histogram split points for field"
                   },
                   "standard_deviation":{
                     "anyOf":[
                       {
                         "type":"null"
                       },
                       {
                         "type":"number"
                       }
                     ],
                     "description":"The sample standard deviation for numeric fields"
                   },
                   "sum":{
                     "type":"number",
                     "description":"Sum of values (for mean calculation)"
                   },
                   "sum_squares":{
                     "type":"number",
                     "description":"Sum of squared values (for variance calculation)"
                   },
                   "variance":{
                     "anyOf":[
                       {
                         "type":"null"
                       },
                       {
                         "type":"number"
                       }
                     ],
                     "description":"The sample variance for numeric fields"
                   }
                 }
               },
               "term_analysis":{
                 "type":"object",
                 "properties":{
                   "case_sensitive":{
                     "type":"boolean",
                     "description":"Defines whether the term analysis is case sensitive"
                   },
                   "enabled":{
                     "type":"boolean",
                     "description":"Enable/disables term analysis for this field"
                   },
                   "language":{
                     "type":"string",
                     "default": "none",
                     "description":"Language code for detected language (or 'none')"
                   },
                   "stem_words":{
                     "type":"boolean",
                     "description":"Defines whether the term analysis stems words"
                   },
                   "token_mode":{
                     "type":"string" ,
                     "enum":[
                       "full_terms_only", "tokens_only", "all"
                     ],
                     "default": "all",
                     "description":"Defines whether the term analysis uses full terms, tokenized terms, or both"
                   },
                   "use_stopwords":{
                     "type":"boolean",
                     "description":"Defines whether the term analysis uses stop words"
                   }
                 }
               }
             }
           },
           {
             "type":"object",
             "properties":{
               "auto_generated":{
                 "type":"boolean",
                 "description":"True if the field was generated from another field"
               },
               "child_ids":{
                 "type":"array" ,
                 "items":{
                   "type":"string"
                 },
                 "description":"IDs of the children if this generates other fields"
               },
               "column_number":{
                 "type":"integer",
                 "minimum":0,
                 "description":"Column from the data source"
               },
               "datatype":{
                 "type":"string" ,
                 "enum":[
                   "boolean", "string"
                 ],
                 "description":"The storage type of the field"
               },
               "description":{
                 "type":"string",
                 "description":"Free text description of the field"
               },
               "label":{
                 "type":"string",
                 "description":"A label for the field (free text for use by clients)"
               },
               "locale":{
                 "type":"string",
                 "description":"Overrides global locale"
               },
               "missing_tokens":{
                 "type":"array" ,
                 "items":{
                   "type":"string"
                 },
                 "description":"Overrides global missing tokens"
               },
               "name":{
                 "type":"string",
                 "description":"Name for the field"
               },
               "optype":{
                 "type":"string" ,
                 "enum":[
                   "text"
                 ],
                 "description":"Operational type of this field"
               },
               "parent_ids":{
                 "type":"array" ,
                 "items":{
                   "type":"string"
                 },
                 "description":"IDs of the parents if this is a generated field"
               },
               "preferred":{
                 "anyOf":[
                   {
                     "type":"null"
                   },
                   {
                     "type":"boolean"
                   }
                 ],
                 "default": true,
                 "description":"Whether the field is used by default for model creation"
               },
               "summary":{
                 "type":"object",
                 "properties":{
                   "average_length":{
                     "type":"number",
                     "description":"The average # of chars for non-missing values"
                   },
                   "missing_count":{
                     "type":"integer",
                     "description":"# of instances missing in this field"
                   },
                   "tag_cloud":{
                     "type":"array" ,
                     "items":{
                       "type":"array" ,
                       "items":[
                         {
                           "type":"string"
                         },
                         {
                           "type":"number"
                         }
                       ]
                     },
                     "description":"Top terms with number of occurences"
                   },
                   "term_forms":{
                     "type":"object",
                     "description":"Dictionary of multi-form terms to all forms seen"
                   }
                 }
               },
               "term_analysis":{
                 "type":"object",
                 "properties":{
                   "case_sensitive":{
                     "type":"boolean",
                     "description":"Defines whether the term analysis is case sensitive"
                   },
                   "enabled":{
                     "type":"boolean",
                     "description":"Enable/disables term analysis for this field"
                   },
                   "language":{
                     "type":"string",
                     "default": "none",
                     "description":"Language code for detected language (or 'none')"
                   },
                   "stem_words":{
                     "type":"boolean",
                     "description":"Defines whether the term analysis stems words"
                   },
                   "token_mode":{
                     "type":"string" ,
                     "enum":[
                       "full_terms_only", "tokens_only", "all"
                     ],
                     "default": "all",
                     "description":"Defines whether the term analysis uses full terms, tokenized terms, or both"
                   },
                   "use_stopwords":{
                     "type":"boolean",
                     "description":"Defines whether the term analysis uses stop words"
                   }
                 }
               }
             }
           },
           {
             "type":"object",
             "properties":{
               "auto_generated":{
                 "type":"boolean",
                 "description":"True if the field was generated from another field"
               },
               "child_ids":{
                 "type":"array" ,
                 "items":{
                   "type":"string"
                 },
                 "description":"IDs of the children if this generates other fields"
               },
               "column_number":{
                 "type":"integer",
                 "minimum":0,
                 "description":"Column from the data source"
               },
               "datatype":{
                 "type":"string" ,
                 "enum":[
                   "string"
                 ],
                 "description":"The storage type of the field"
               },
               "description":{
                 "type":"string",
                 "description":"Free text description of the field"
               },
               "label":{
                 "type":"string",
                 "description":"A label for the field (free text for use by clients)"
               },
               "locale":{
                 "type":"string",
                 "description":"Overrides global locale"
               },
               "missing_tokens":{
                 "type":"array" ,
                 "items":{
                   "type":"string"
                 },
                 "description":"Overrides global missing tokens"
               },
               "name":{
                 "type":"string",
                 "description":"Name for the field"
               },
               "optype":{
                 "type":"string" ,
                 "enum":[
                   "datetime"
                 ],
                 "description":"Operational type of this field"
               },
               "parent_ids":{
                 "type":"array" ,
                 "items":{
                   "type":"string"
                 },
                 "description":"IDs of the parents if this is a generated field"
               },
               "preferred":{
                 "anyOf":[
                   {
                     "type":"null"
                   },
                   {
                     "type":"boolean"
                   }
                 ],
                 "default": true,
                 "description":"Whether the field is used by default for model creation"
               },
               "summary":{
                 "type":"object",
                 "properties":{
                   "missing_count":{
                     "type":"integer",
                     "description":"# of instances missing this field"
                   }
                 },
                 "additionalProperties": false
               },
               "term_analysis":{
                 "type":"object",
                 "properties":{
                   "case_sensitive":{
                     "type":"boolean",
                     "description":"Defines whether the term analysis is case sensitive"
                   },
                   "enabled":{
                     "type":"boolean",
                     "description":"Enable/disables term analysis for this field"
                   },
                   "language":{
                     "type":"string",
                     "default": "none",
                     "description":"Language code for detected language (or 'none')"
                   },
                   "stem_words":{
                     "type":"boolean",
                     "description":"Defines whether the term analysis stems words"
                   },
                   "token_mode":{
                     "type":"string" ,
                     "enum":[
                       "full_terms_only", "tokens_only", "all"
                     ],
                     "default": "all",
                     "description":"Defines whether the term analysis uses full terms, tokenized terms, or both"
                   },
                   "use_stopwords":{
                     "type":"boolean",
                     "description":"Defines whether the term analysis uses stop words"
                   }
                 }
               },
               "time_formats":{
                 "type":"array" ,
                 "items":{
                   "type":"string"
                 },
                 "description":"Formats of times in this field from clj-time"
               }
             }
           },
           {
             "type":"object",
             "properties":{
               "auto_generated":{
                 "type":"boolean",
                 "description":"True if the field was generated from another field"
               },
               "child_ids":{
                 "type":"array" ,
                 "items":{
                   "type":"string"
                 },
                 "description":"IDs of the children if this generates other fields"
               },
               "column_number":{
                 "type":"integer",
                 "minimum":0,
                 "description":"Column from the data source"
               },
               "datatype":{
                 "type":"string" ,
                 "enum":[
                   "string"
                 ],
                 "description":"The storage type of the field"
               },
               "description":{
                 "type":"string",
                 "description":"Free text description of the field"
               },
               "label":{
                 "type":"string",
                 "description":"A label for the field (free text for use by clients)"
               },
               "locale":{
                 "type":"string",
                 "description":"Overrides global locale"
               },
               "missing_tokens":{
                 "type":"array" ,
                 "items":{
                   "type":"string"
                 },
                 "description":"Overrides global missing tokens"
               },
               "name":{
                 "type":"string",
                 "description":"Name for the field"
               },
               "optype":{
                 "type":"string" ,
                 "enum":[
                   "categorical"
                 ],
                 "description":"Operational type of this field"
               },
               "parent_ids":{
                 "type":"array" ,
                 "items":{
                   "type":"string"
                 },
                 "description":"IDs of the parents if this is a generated field"
               },
               "preferred":{
                 "anyOf":[
                   {
                     "type":"null"
                   },
                   {
                     "type":"boolean"
                   }
                 ],
                 "default": true,
                 "description":"Whether the field is used by default for model creation"
               },
               "summary":{
                 "type":"object",
                 "properties":{
                   "categories":{
                     "anyOf":[
                       {
                         "type":"array" ,
                         "items":{
                           "type":"array" ,
                           "items":[
                             {
                               "type":"string"
                             },
                             {
                               "type":"number"
                             }
                           ]
                         }
                       },
                       {
                         "type":"array" ,
                         "items":{
                           "type":"array" ,
                           "items":[
                             {
                               "type":"integer"
                             },
                             {
                               "type":"null"
                             }
                           ]
                         }
                       }
                     ],
                     "description":"The possible categories for categorical fields"
                   },
                   "missing_count":{
                     "anyOf":[
                       {
                         "type":"null"
                       },
                       {
                         "type":"integer"
                       }
                     ],
                     "description":"# of instances missing this field # of instances missing this field"
                   }
                 },
                 "description":"# of instances missing this field"
               },
               "term_analysis":{
                 "type":"object",
                 "properties":{
                   "case_sensitive":{
                     "type":"boolean",
                     "description":"Defines whether the term analysis is case sensitive"
                   },
                   "enabled":{
                     "type":"boolean",
                     "description":"Enable/disables term analysis for this field"
                   },
                   "language":{
                     "type":"string",
                     "default": "none",
                     "description":"Language code for detected language (or 'none')"
                   },
                   "stem_words":{
                     "type":"boolean",
                     "description":"Defines whether the term analysis stems words"
                   },
                   "token_mode":{
                     "type":"string" ,
                     "enum":[
                       "full_terms_only", "tokens_only", "all"
                     ],
                     "default": "all",
                     "description":"Defines whether the term analysis uses full terms, tokenized terms, or both"
                   },
                   "use_stopwords":{
                     "type":"boolean",
                     "description":"Defines whether the term analysis uses stop words"
                   }
                 }
               }
             }
           }
         ],
         "description":"The full descriptor of the objective field, when there's only one."
       },
       "objective_fields":{
         "type":"array" ,
         "items":{
           "type":"string"
         },
         "description":"Collection of objective field identifiers (targets)"
       },
       "objective_weights":{
         "type":"array" ,
         "items":{
           "type":"array" ,
           "items":[
             {
               "type":"string"
             },
             {
               "type":"number"
             }
           ]
         },
         "description":"For classification models, this maps the objective classes to class weights"
       },
       "ordering":{
         "type":"string" ,
         "enum":[
           "random", "linear", "deterministic"
         ],
         "default": "deterministic"
       },
       "prune_holdout":{
         "type":"number",
         "minimum":0,
         "maximum":1,
         "description":"DEPRECATED - Pruning with a holdout set"
       },
       "random_candidate_ratio":{
         "type":"number",
         "minimum":0,
         "maximum":1,
         "description":"Similar to 'random_candidates' but expressed as a ratio of the total candidates (between 0 and 1)"
       },
       "random_candidates":{
         "type":"integer",
         "description":"Sets the number of random fields considered when 'randomize' is true. By default this is the square root of the total number of input fields. Also known as 'mtry' in the R random forest package"
       },
       "randomize":{
         "type":"boolean",
         "description":"When true only a random subset of fields are considered for each split (ala random forests)"
       },
       "root":{
         "type":"object",
         "properties":{
           "children":{
             "type":"array" ,
             "items":{
               "$ref":"node.json"
             },
             "unknownPredicate":"count > 0",
             "description":"Children of this nod"
           },
           "confidence":{
             "type":"number",
             "minimum":0,
             "description":"Probability of correctness for classification and an estimate of the error for regression"
           },
           "count":{
             "type":"number",
             "description":"Number of training instances at this node"
           },
           "distribution":{
             "type":"array" ,
             "items":{
               "type":"array" ,
               "items":[
                 {
                   "type":"string"
                 },
                 {
                   "type":"number"
                 }
               ]
             },
             "description":"DEPRECATED - Distribution of the target at this nod"
           },
           "id":{
             "type":"number",
             "description":"The node id, assigned depth first starting with 0"
           },
           "objective_summary":{
             "type":"object",
             "properties":{
               "bins":{
                 "type":"array" ,
                 "items":{
                   "type":"array" ,
                   "items":[
                     {
                       "type":"number"
                     },
                     {
                       "type":"number"
                     }
                   ]
                 },
                 "description":"Captures the distribution for the objective field.  Each tuple represents a bin from an approximate histogram.  Each bin contains the bin mean and a membership count.  Used when there are more than 32 unique numeric values. During model construction, the counts can be fractional for partial models.  When the model is finished, however, all counts will be integers."
               },
               "categories":{
                 "type":"array" ,
                 "items":{
                   "type":"array" ,
                   "items":[
                     {
                       "type":"string"
                     },
                     {
                       "type":"number"
                     }
                   ]
                 },
                 "description":"Captures the distribution for the objective field.  Each tuple contains a category and the category occurrence count.  Used when the objective is categorical. For partial models, counts are an estimation and, as such, they won't be in general integers.  But finished models the pairs will always consist of a string and an integer."
               },
               "counts":{
                 "type":"array" ,
                 "items":{
                   "type":"array" ,
                   "items":[
                     {
                       "type":"number"
                     },
                     {
                       "type":"number"
                     }
                   ]
                 },
                 "description":"Captures the distribution for the objective field.  Contains tuples of the unique values and their occurrence counts.  Used when there are 32 or less unique numeric values. During model construction, these counts can be fractional for partial models.  When the model is finished, however, all counts will be integers."
               },
               "exact":{
                 "type":"boolean",
                 "description":"When the numeric distribution is in eqi-width format this captures whether the histogram is approximate or represents the distribution exactly"
               },
               "maximum":{
                 "type":"number",
                 "description":"Maximum value for numeric fields, used when 'bins' are present"
               },
               "populations":{
                 "type":"array" ,
                 "items":{
                   "type":"number"
                 },
                 "description":"When the numeric distribution is in eqi-width format this captures the population of each eqi-width bin"
               },
               "start":{
                 "type":"number",
                 "description":"When the numeric distribution is in eqi-width this captures the lower edge of the first bin"
               },
               "width":{
                 "type":"number",
                 "description":"When the numeric distribution is in eqi-width format this captures the width of each eqi-width bin"
               }
             },
             "description":"Distribution for the the prediction at this point"
           },
           "output":{
             "anyOf":[
               {
                 "type":"number"
               },
               {
                 "type":"string"
               }
             ],
             "description":"Prediction given at this node"
           },
           "predicate":{
             "anyOf":[
               {
                 "type":"boolean"
               },
               {
                 "type":"object",
                 "properties":{
                   "field":{
                     "type":"string",
                     "description":"Identifier of the field used for this decision"
                   },
                   "operator":{
                     "type":"string" ,
                     "enum":[
                       "!=", "=", "lt", "<=", "notEqual", "greaterThan", "eq", "/=", "=*", "gt", "greaterOrEqual", "<=*", ">*", ">=", "!=*", "lessThan", "ge", "<", "le", "equal", "lessOrEqual", "equals", ">"
                     ],
                     "description":"Operator used to test the field's value"
                   },
                   "term":{
                     "type":"string",
                     "description":"The term/word of interest for the predicate. The occurance count of this term will be the value that is split on."
                   },
                   "value":{
                     "anyOf":[
                       {
                         "type":"null"
                       },
                       {
                         "anyOf":[
                           {
                             "type":"number"
                           },
                           {
                             "type":"string"
                           }
                         ]
                       }
                     ],
                     "description":"Value used, besides the field's, for this decision"
                   }
                 }
               }
             ]
           },
           "weight":{
             "type":"number",
             "description":"Total weight at this node (if tree is weighted)"
           }
         },
         "required":[
           "count", "output", "predicate"
         ],
         "description":"The root node of the decision tree"
       },
       "row_range":{
         "type":"object",
         "properties":{
           "size":{
             "type":"integer",
             "minimum":0
           },
           "start":{
             "type":"integer",
             "minimum":0
           }
         },
         "additionalProperties": false
       },
       "row_ranges":{
         "type":"array" ,
         "items":{
           "type":"array" ,
           "items":[
             {
               "type":"string"
             },
             {
               "type":"object",
               "properties":{
                 "size":{
                   "type":"integer",
                   "minimum":0
                 },
                 "start":{
                   "type":"integer",
                   "minimum":0
                 }
               },
               "additionalProperties": false
             }
           ]
         },
         "description":"Rows used to build this model, per dataset"
       },
       "sample":{
         "type":"object",
         "properties":{
           "rate":{
             "type":"number",
             "minimum":0,
             "description":"The sampling parameters for this ensemble The rate: fraction of rows we pick"
           },
           "replace":{
             "type":"boolean",
             "description":"Whether we sample with replacement or not"
           },
           "seed":{
             "type":"string",
             "description":"Seeds the ensemble so that it's deterministic"
           }
         },
         "required":[
           "rate"
         ],
         "additionalProperties": false
       },
       "samples":{
         "type":"array" ,
         "items":{
           "type":"array" ,
           "items":[
             {
               "type":"string"
             },
             {
               "type":"object",
               "properties":{
                 "out_of_bag":{
                   "type":"boolean",
                   "description":"Is the sampling out of bag?"
                 },
                 "rate":{
                   "type":"number",
                   "minimum":0,
                   "description":"The rate: fraction of rows we pick"
                 },
                 "replace":{
                   "type":"boolean",
                   "description":"Whether we sample with replacement or not"
                 },
                 "seed":{
                   "anyOf":[
                     {
                       "type":"number"
                     },
                     {
                       "type":"string"
                     }
                   ],
                   "description":"A string to feed the random number generator used for sampling.  The same seed produces always the same sample (if all other parameters stay the same).  If not specified, we choose a seed at random"
                 }
               },
               "required":[
                 "rate"
               ]
             }
           ]
         },
         "description":"A list of sample specifications, as pairs dataset id and sample"
       },
       "selective_pruning":{
         "type":"boolean",
         "description":"PRIVATE - When true, stat pruning will have less effect for small datasets"
       },
       "size":{
         "type":"integer",
         "minimum":1,
         "description":"The desired number of trees in the ensemble"
       },
       "split_criterion":{
         "type":"string" ,
         "enum":[
           "information_gain", "information_gain_mix", "squared_error", "information_gain_ratio", "squared_error_ratio"
         ],
         "description":"Method of choosing best attribute and split point for a given node"
       },
       "stat_pruning":{
         "anyOf":[
           {
             "type":"null"
           },
           {
             "type":"boolean"
           }
         ],
         "default": true,
         "description":"Eliminates low confidence leaf nodes from tree statistical tests"
       },
       "training_performance_measure":{
         "anyOf":[
           {
             "type":"object",
             "properties":{
               "accuracy":{
                 "type":"number",
                 "minimum":0,
                 "maximum":1,
                 "description":"Classifier accuracy, correct/total instances"
               },
               "average_f_measure":{
                 "type":"number",
                 "minimum":0,
                 "maximum":1,
                 "description":"Macro-averaged F1 score over all classes"
               },
               "average_phi":{
                 "type":"number",
                 "minimum":-1,
                 "maximum":1,
                 "description":"Macro-averaged Phi coefficient over all classes"
               },
               "average_precision":{
                 "type":"number",
                 "minimum":0,
                 "maximum":1,
                 "description":"Macro-averaged precision over all classes"
               },
               "average_recall":{
                 "type":"number",
                 "minimum":0,
                 "maximum":1,
                 "description":"Macro-averaged recall over all classes"
               },
               "confusion_matrix":{
                 "type":"array" ,
                 "items":{
                   "type":"array" ,
                   "items":{
                     "type":"number",
                     "minimum":0
                   }
                 }
               },
               "per_class_statistics":{
                 "type":"array" ,
                 "items":{
                   "type":"object",
                   "properties":{
                     "accuracy":{
                       "type":"number",
                       "minimum":0,
                       "maximum":1,
                       "description":"Accuracy (correct/total) for this class"
                     },
                     "class_name":{
                       "type":"string",
                       "description":"String name for this class"
                     },
                     "f_measure":{
                       "type":"number",
                       "minimum":0,
                       "maximum":1,
                       "description":"F1 Score for this class"
                     },
                     "phi_coefficient":{
                       "type":"number",
                       "minimum":-1,
                       "maximum":1,
                       "description":"Phi coefficient for this class"
                     },
                     "precision":{
                       "type":"number",
                       "minimum":0,
                       "maximum":1,
                       "description":"Precision for this class"
                     },
                     "present_in_test_data":{
                       "type":"boolean",
                       "description":"Whether or not this class was seen in the test data for the evaluation"
                     },
                     "recall":{
                       "type":"number",
                       "minimum":0,
                       "maximum":1,
                       "description":"Recall for this class"
                     }
                   }
                 }
               }
             },
             "additionalProperties": false
           },
           {
             "type":"object",
             "properties":{
               "mean_absolute_error":{
                 "type":"number",
                 "minimum":0,
                 "description":"Average of absolute values of prediction errors"
               },
               "mean_squared_error":{
                 "type":"number",
                 "minimum":0,
                 "description":"Average of squared values of prediction errors"
               },
               "r_square":{
                 "type":"number",
                 "minimum":0,
                 "maximum":1,
                 "description":"R^2 (Coefficient of Determination)"
               }
             }
           }
         ],
         "description":"Performance measures on training data"
       },
       "type":{
         "type":"string" ,
         "enum":[
           "unsupervised", "statistics", "classification", "regression"
         ],
         "description":"Identifier of this model's type (e.g., regression)"
       },
       "weight_field":{
         "type":"string",
         "description":"Weight field identifier"
       },
       "z_statistic":{
         "type":"number",
         "default": 1,
         "description":"PRIVATE - Parameter for stat pruning"
       }
     },
     "required":[
       "kind", "size"
     ]
   }
 },
 "required":[
   "model"
 ],
 "additionalProperties": false
}